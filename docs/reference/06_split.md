# 06_split.py 脚本说明

该脚本用于将数据集划分为**训练集 (Train)**、**验证集 (Validation)** 和 **测试集 (Test)**。为了模拟真实的应用场景并防止数据泄露，划分策略综合考虑了**序列相似性（聚类）**和**时间截止日期（Cutoff Date）**。

## 核心功能

1.  **基于时间的强制划分**：
    *   读取 `04_cutoff.py` 生成的 `before_cutoff_in_sabdab.json`。
    *   **原则**：所有在截止日期（如 2021-09-30）之前发布的 PDB 条目，必须进入训练集。
    *   **扩展原则**：如果某个聚类簇（Cluster）中包含了任何一个“截止日期前”的条目，那么该簇中的**所有**条目（即使是新的）也都归入训练集，以防止通过序列相似性发生数据泄露。

2.  **剩余数据划分**：
    *   对于不包含旧数据的剩余聚类簇，按照约 **90:5:5** 的比例划分给训练集、验证集和测试集。
    *   使用交替分配策略（Round-robin 变体）来平衡验证集和测试集的大小。

3.  **输出数据集列表**：
    *   最终生成三个 JSON 文件，分别包含训练、验证和测试集的条目名称列表。

## 主要函数

*   `main(args)`: 执行整个划分逻辑。
    *   加载聚类结果和时间筛选结果。
    *   确定必须放入训练集的簇。
    *   将剩余簇分配到 Train/Val/Test。
    *   保存结果。

## 使用参数

*   `--clu_result_path`: MMseqs2 聚类结果文件路径（TSV格式）。
*   `--pdb_before_cutoff_in_sabdab_path`: 时间筛选结果 JSON 文件路径。
*   `--precessed_data_path`: 处理后的数据 CSV 路径。
*   `--output_dir`: 输出目录。

## 输出文件
*   `train_entry.json`
*   `val_entry.json`
*   `test_entry.json`
